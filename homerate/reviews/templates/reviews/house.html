{% extends 'homepage/base.html' %}
{% load staticfiles %}
{% load sass_tags %}

{% block title %}
    {{ house.address }}
{% endblock %}

{% block head %}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <link rel="stylesheet" href="{% sass_src 'css/stars.scss' %}">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.0.13/css/all.css"
          integrity="sha384-oi8o31xSQq8S0RpBcb4FaLB8LJi9AT8oIdmS1QldR8Ui7KUQjNAnDlJjp55Ba8FG" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{% static 'slick/slick.css' %}"/>
    <link rel="stylesheet" type="text/css" href="{% static 'slick/slick-theme.css' %}"/>
{% endblock %}

{% block content %}
    <div class="container">

        <section class="gallery">
            <div class="galleryWrapper">
                {% for img in images %}
                    <img src="{{ img.image.url }}"/>
                {% endfor %}
            </div>
        </section>

        <div class="mainContent">
            <section class="houseInfo">
                <header class="houseHeader">
                    <h2 class="houseAddress">{{ house.split_address.line1 }}</h2>
                    <p class="houseLocation">{{ house.split_address.line2 }} ∙ </p>
                    <p class="averageStars createStars">{{ rating }}</p>
                </header>
                <ul class="basicInfo">
                    <li class="infoItem">
                        <i class="far fa-bed"></i>
                        <span class="value">{{ house.bedrooms }}</span>
                        <span class="label">bed</span>
                    </li>
                    <li class="infoItem">
                        <i class="far fa-bath"></i>
                        <span class="value">{{ house.bathrooms }}</span>
                        <span class="label">bath</span>
                    </li>
                    <li class="infoItem">
                        <i class="far fa-couch"></i>
                        <span class="value">{{ house.living_rooms }}</span>
                        <span class="label">living room</span>
                    </li>
                </ul>
            </section>

            <section class="reviews">
                <h2>Reviews</h2>
                <a class="addReview button" href="{% url 'new_report' house.id %}">+ Add a review</a>
                <ul class="reviewList">
                    {% for review in reviews %}
                        <li class="review">
                            <header class="reviewHeader">
                                <i class="fas fa-user-circle"></i>
                                <div class="text">
                                    <h3>Tenant from {{ review.moved_in_date }} to {{ review.moved_out_date }}</h3>
                                    <a class="averageStars createStars">{{ review.general_rating }}</a>
                                    {% if user == review.author %}
                                        <div class="reviewActions">
                                            ∙
                                            <a class="edit" href="{% url 'edit_report' id=review.pk %}">Edit</a>
                                            ∙
                                            <a class="delete" href="{% url 'delete_report' id=review.pk %}">Delete</a>
                                        </div>
                                    {% endif %}
                                </div>
                            </header>

                            <ul class="reviewPoints">

                                <li class="reviewPointWrapper">
                                    <div class="reviewPoint">
                                        <p class="label">Landlord Responsiveness</p>
                                        <p class="value createStars">{{ review.landlord_responsiveness }} ★</p>
                                    </div>

                                    <div class="reviewComment">
                                        {{ review.landlord_responsiveness_comment|default_if_none:"" }}
                                    </div>
                                </li>

                                <li class="reviewPointWrapper">
                                    <div class="reviewPoint">
                                        <p class="label">Repair Quality</p>
                                        <p class="value createStars">{{ review.repair_quality }}</p>
                                    </div>

                                    <div class="reviewComment">
                                        {{ review.repair_quality_comment|default_if_none:"" }}
                                    </div>
                                </li>

                                <li class="reviewPointWrapper">
                                    <div class="reviewPoint">
                                        <p class="label">Water Pressure</p>
                                        <p class="value createStars">{{ review.water_pressure }}</p>
                                    </div>

                                    <div class="reviewComment">
                                        {{ review.water_pressure_comment|default_if_none:"" }}
                                    </div>
                                </li>

                                <li class="reviewPointWrapper">
                                    <div class="reviewPoint">
                                        <p class="label">Utilities</p>
                                        <p class="value createStars">{{ review.utilities }}</p>
                                    </div>

                                    <div class="reviewComment">
                                        {{ review.utilities_comment|default_if_none:"" }}
                                    </div>
                                </li>

                                <li class="reviewPointWrapper">
                                    <div class="reviewPoint">
                                        <p class="label">Furniture Quality</p>
                                        <p class="value createStars">{{ review.furniture_quality }}</p>
                                    </div>

                                    <div class="reviewComment">
                                        {{ review.furniture_quality_comment|default_if_none:"" }}
                                    </div>
                                </li>

                                <li class="reviewPointWrapper">
                                    <div class="reviewPoint">
                                        <p class="label">Mattress Quality</p>
                                        <p class="value createStars">{{ review.mattress_quality }}</p>
                                    </div>

                                    <div class="reviewComment">
                                        {{ review.mattress_quality_comment|default_if_none:"" }}
                                    </div>
                                </li>

                                <li class="reviewPointWrapper">
                                    <div class="reviewPoint">
                                        <p class="label">Build Quality</p>
                                        <p class="value createStars">{{ review.build_quality }}</p>
                                    </div>

                                    <div class="reviewComment">
                                        {{ review.build_quality_comment|default_if_none:"" }}
                                    </div>
                                </li>

                                <li class="reviewPointWrapper">
                                    <div class="reviewPoint">
                                        <p class="label">Quietness</p>
                                        <p class="value createStars">{{ review.quietness }}</p>
                                    </div>

                                    <div class="reviewComment">
                                        {{ review.quietness_comment|default_if_none:"" }}
                                    </div>
                                </li>

                                <li class="reviewPointWrapper">
                                    <div class="reviewPoint">
                                        <p class="label">Pest/Insect-free</p>
                                        <p class="value createStars">{{ review.pest_free }}</p>
                                    </div>

                                    <div class="reviewComment">
                                        {{ review.pest_free_comment|default_if_none:"" }}
                                    </div>
                                </li>

                                <li class="reviewPointWrapper">
                                    <div class="reviewPoint">
                                        <p class="label">Smells</p>
                                        <p class="value createStars">{{ review.smells }}</p>
                                    </div>

                                    <div class="reviewComment">
                                        {{ review.smells_comment|default_if_none:"" }}
                                    </div>
                                </li>

                                <li class="reviewPointWrapper">
                                    <div class="reviewPoint">
                                        <p class="label">Damp/Mould-free</p>
                                        <p class="value createStars">{{ review.damp_mould_free }}</p>
                                    </div>

                                    <div class="reviewComment">
                                        {{ review.damp_mould_free_comment|default_if_none:"" }}
                                    </div>
                                </li>

                                <li class="reviewPointWrapper">
                                    <div class="reviewPoint">
                                        <p class="label">Monthly Rent</p>
                                        <p class="value createStars">£{{ review.monthly_rent }}</p>
                                    </div>
                                </li>

                                <li class="reviewPointWrapper">
                                    <div class="reviewPoint">
                                        <p class="label">Monthly Bills</p>
                                        <p class="value createStars">£{{ review.monthly_bills }}</p>
                                    </div>
                                </li>

                            </ul>
                        </li>
                    {% endfor %}
                </ul>
            </section>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="{% static 'slick/slick.min.js' %}"></script>
    <script src="{% static 'js/jquery.barrating.min.js' %}"></script>
    <script src="{% static 'js/house.js' %}"></script>
{% endblock %}